{% extends "base.html" %}

{% block title %}Rejestracja{% endblock %}

{% block footer %}
	<script src="/js/hideShowPassword.min.js"></script>

	<script>
		$.validator.addMethod('validPassword',
			function(value, element, param) {
				if (value != '') {
					if (value.match(/.*[a-z]+.*/i) == null) {
						return false;
					}
					if (value.match(/.*\d+.*/) == null) {
						return false;
					}
				}
				
				return true;
			},
			'Conajmniej jedna litera i jedna liczba'
		);
		
		$(document).ready(function() {
			
			$('#signupForm').validate({
				rules: {
					name: 'required',
					email: {
						required: true,
						email: true,
						remote: '/account/validate-email'
					},
					password: {
						required: true,
						minlength: 6,
						validPassword: true
					}
				},
				messages: {
					email: {
						remote: 'Email jest zajęty'
					}
				}
				
				$('#inputPassword').hideShowPassword({
					show: false,
					innerToggle: 'focus'
				});
			});
		});
	</script>
{% endblock %}

{% block body %}
	
	{% if user.errors is not empty %}
		<p>Błędy formularza:</p>
			<ul>
				{% for error in user.errors %}
					<li>{{ error }}</li>
				{% endfor %}
			</ul>
	{% endif %}
	
	<section>
					
		<div class="row">
			<div class="col-10 col-sm-8 col-md-6 col-lg-4 mx-auto rounded" style="border: 1px #f2f2f2 dashed; background-color: rgba(242, 242, 242, 0.2); ">
				
				<form action="/signup/create" method="post" id="signupForm">
					
					<div class="col-10 offset-1 mt-5">
						<input type="text" class="form-control mb-3" placeholder="Imię" name="name" id="inputName" value="{{ user.name }}" required />
					</div>
					
					<div class="col-10 offset-1 mt-3">
						<input type="email" class="form-control mb-3" placeholder="E-mail" name="email" id="inputEmail" value="{{ user.email }}" required />
					</div>
					
					<div class="col-10 offset-1">
						<input type="password" class="form-control mb-4" placeholder="Hasło" name="password" id="inputPassword" required />
					</div>
					
					<div class="col-10 offset-1">
						<input type="submit" class="btn btn-info btn-block mb-5 font-weight-bold" value="Zarejestruj">
					</div>
				
				</form>
				
			</div>
		</div>
		
	</section>
	
		<article>
				
		<div class="row mt-4">
			<h1 class="h4 col-12 text-center mb-4">Zarejestruj się za darmo i trzymaj wydatki <strong>pod kontrolą</strong></h1>
		
			<div class="col-12 text-center">
				<ul class="list-unstyled">
					<li class="mb-1">Bilans z całego miesiąca lub wybranego okresu</li>
					<li class="mb-1">Wydatki posegregowane według kategorii</li>
					<li class="mb-1">Wizualizacja obszarów Twoich wydatków</li>
				</ul>
			</div>
		</div>
		
	</article>

{% endblock %}
